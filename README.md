# doin-core

Core library for DOIN (Decentralized Optimization and Inference Network).

## What is DOIN?

DOIN is a decentralized system where nodes collaboratively optimize ML models using blockchain consensus. Instead of proof-of-work, blocks are generated by verified optimization improvements — **Proof of Optimization**.

## This Package

`doin-core` provides the foundation: consensus mechanisms, data models, cryptographic primitives, protocol definitions, and the plugin system.

### Consensus (`doin_core.consensus`)
- **Proof of Optimization** — block generation triggered by weighted optimization increments exceeding a dynamic threshold
- **Verified Utility Weighting (VUW)** — domain weights: `weight = base × demand × (1 + progress) × verification_strength`
- **Incentive model** — configurable reward/penalty based on verification accuracy
- **Fork choice rule** — heaviest chain (most verified work), not longest
- **Finality checkpoints** — prevents long-range chain rewrites
- **External anchoring** — periodic chain hash publication to external ledgers
- **Deterministic seeds** — per-evaluator synthetic data seeds, unpredictable to optimizer

### Models (`doin_core.models`)
- Block, Optimae, Domain, Transaction, Task/TaskQueue
- Commit-reveal protocol (anti-front-running)
- Quorum management (random evaluator selection)
- Reputation system (EMA decay, asymmetric penalties)
- Resource limits + bounds validation (anti-DoS)

### Plugins (`doin_core.plugins`)
- Base classes: `OptimizationPlugin`, `InferencePlugin`, `SyntheticDataPlugin`
- Plugin loader via setuptools entry points

### Protocol (`doin_core.protocol`)
- P2P message types: commit, reveal, block announcement, task lifecycle, chain sync

## Install

```bash
pip install git+https://github.com/harveybc/doin-core.git
```

## Tests

```bash
python -m pytest tests/ -v
# 159 tests
```

## Part of DOIN

- [doin-core](https://github.com/harveybc/doin-core) — This package
- [doin-node](https://github.com/harveybc/doin-node) — Unified node (transport, chain, sync)
- [doin-optimizer](https://github.com/harveybc/doin-optimizer) — Standalone optimizer
- [doin-evaluator](https://github.com/harveybc/doin-evaluator) — Standalone evaluator
- [doin-plugins](https://github.com/harveybc/doin-plugins) — Domain plugins (quadratic, predictor)
